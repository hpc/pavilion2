language: python
before_install:
    - sudo apt-get install -y environment-modules tcl pylint3 python3-sphinx

install:
    - pip install -r requirements.txt sphinx
    - ln -s pavilion.yaml.travis-ci test/data/pav_config_dir/pavilion.yaml

stages:
    - prelim
    - test

jobs:
    include:
        - stage: prelim
          python:
            - "3.4"
          script: ./test/run_tests -o style -o doc_build
        - stage: test
          python:
            - "3.4"
            - "3.6"
            - "3.7"
          script: 
            - ./test/run_tests -s style -s doc_build
